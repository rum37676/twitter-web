{"version":3,"sources":["src/app.js","src/environment.js","src/home.js","src/main.js","src/nav-bar.js","src/services/async-http-client.js","src/services/fixtures.js","src/services/messages.js","src/services/twitter-service.js","src/resources/index.js","src/viewmodels/dashboard/dashboard.js","src/viewmodels/admin/admin.js","src/viewmodels/followerTimeline/followerTimeline.js","src/viewmodels/globalTimeline/globalTimeline.js","src/viewmodels/logout/logout.js","src/viewmodels/login/login.js","src/viewmodels/profil/profil.js","src/viewmodels/signup/signup.js","src/viewmodels/socialGraph/socialGraph.js","src/viewmodels/timeline/timeline.js","src/viewmodels/tweet/blob-to-url.js","src/viewmodels/tweet/file-list-to-array.js","src/viewmodels/tweet/tweet.js","src/viewmodels/usercard/usercard.js","src/viewmodels/users/users.js","src/viewmodels/userTimeline/userTimeline.js"],"names":["App","ts","au","ea","twitterService","subscribe","msg","status","changed","router","navigate","replace","trigger","reset","success","setRoot","configureRouter","config","map","route","name","moduleId","nav","title","attached","isAuthenticated","Promise","all","updateData","then","navigateToRoute","catch","console","error","debug","testing","Home","aurelia","role","mapUnknownRoutes","configure","use","standardConfiguration","feature","developmentLogging","plugin","start","NavBar","showNav","navItem","ownUser","log","toLowerCase","AsyncHttpClient","httpClient","fixtures","http","withBaseUrl","baseUrlOnline","localStorage","sessionTokenTwitter","auth","JSON","parse","withHeader","token","get","clearAuthentication","authenticate","url","user","post","response","content","stringify","configuration","email","publish","message","obj","delete","Fixtures","baseUrlLocal","users","username","password","tweets","text","tweeter","LoginStatus","TweetUpdate","UserUpdate","OwnUserUpdate","TwitterService","FormData","data","ac","res","saveTweet","tweetText","tweetImage","formData","append","getTweets","deleteTweet","tweet","_id","deleteAllTweetsForUser","follow","bool","getUsers","deleteUser","deleteAllUsers","logout","deleteTweetsForUser","updateProfil","getMe","uploadProfilImage","profilIimage","undefined","register","newUser","login","Dashboard","Admin","adminView","errorText","addUser","FollowerTimeline","updateUsers","push","followers","follower","GlobalTimeline","Logout","Login","rememberMe","emailTwitter","loginOptions","trim","Profil","profilImage","uploading","updateUser","update","deleteAllTweets","length","getNumberOfFollowedUsers","number","getNumberOfTweets","Signup","e","d3","socialGraph","inject","nodes","links","calculateGraph","node","link","svg","select","width","attr","height","color","scaleOrdinal","schemeCategory20","simulation","forceSimulation","force","forceLink","distance","strength","forceManyBody","forceCenter","nodeById","d","id","bilinks","forEach","s","source","t","target","i","selectAll","enter","filter","group","on","navigateToUser","call","drag","dragstarted","dragged","dragended","ticked","positionLink","positionNode","x","y","event","active","alphaTarget","restart","fx","fy","reference","userId","Timeline","updateTweets","allowDelete","activate","BlobToUrlValueConverter","toView","blob","URL","createObjectURL","FileListToArrayValueConverter","fileList","files","item","Tweet","imageList","selectedFiles","createTweet","addPicturesToArray","Usercard","alreadyFollowing","hasProfilImage","Users","otherUsers","UserTimeline","params"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {inject, Aurelia} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {LoginStatus} from './services/messages';\nimport TwitterService from './services/twitter-service';\n\n@inject(TwitterService, Aurelia, EventAggregator)\nexport class App {\n\n  constructor(ts, au, ea) {\n    this.au = au;\n    this.twitterService = ts;\n    this.ea = ea;\n    this.ea.subscribe(LoginStatus, msg => {\n      if (msg.status.changed === true) {\n        this.router.navigate('/', { replace: true, trigger: false });\n        this.router.reset();\n        if (msg.status.success === true) {\n          au.setRoot('home');\n        } else {\n          au.setRoot('app');\n        }\n      }\n    });\n  }\n\n  configureRouter(config, router) {\n    config.map([\n      { route: ['', 'login'], name: 'login', moduleId: 'viewmodels/login/login', nav: true, title: 'Login' },\n      { route: 'signup', name: 'signup', moduleId: 'viewmodels/signup/signup', nav: true, title: 'Signup' }\n    ]);\n    this.router = router;\n  }\n\n  attached() {\n    if (this.twitterService.isAuthenticated()) {\n      Promise.all([\n        this.twitterService.updateData()\n      ]).then(res => {\n        this.au.setRoot('home').then(() => {\n          this.router.navigateToRoute('globalTimeline');\n        });\n      }).catch(error => {\n        console.error(error);\n      });\n    }\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import { inject, Aurelia } from 'aurelia-framework';\nimport TwitterService from 'services/twitter-service';\n\n@inject(Aurelia, TwitterService)\nexport class Home {\n\n  constructor(au, ts) {\n    this.aurelia = au;\n    this.twitterService = ts;\n  }\n\n  configureRouter(config, router) {\n\n    config.map([\n      { route: 'socialGraph', name: 'socialGraph', moduleId: 'viewmodels/socialGraph/socialGraph', nav: true, title: 'Network'},\n      { route: 'followerTimeline', name: 'followerTimeline', moduleId: 'viewmodels/followerTimeline/followerTimeline', nav: true, title: 'Follower Timeline' },\n      { route: ['', 'home'], name: 'globalTimeline', moduleId: 'viewmodels/globalTimeline/globalTimeline', nav: true, title: 'Global Timeline' },\n      { route: 'users', name: 'users', moduleId: 'viewmodels/users/users', nav: true, title: 'Users'},\n      { route: 'profil', name: 'profil', moduleId: 'viewmodels/profil/profil', nav: true, title: 'Profil' },\n      { route: 'admin', name: 'admin', moduleId: 'viewmodels/admin/admin', nav: true, title: 'Admin', role: 'admin' },\n      { route: 'userTimeline/:id', name: 'userTimeline', moduleId: 'viewmodels/userTimeline/userTimeline', nav: false, title: 'userTimeline' },\n      { route: 'logout', name: 'logout', moduleId: 'viewmodels/logout/logout', nav: true, title: 'Logout' }\n    ]);\n    this.router = router;\n\n    config.mapUnknownRoutes(instruction => {\n      return 'home';\n    });\n  }\n\n  attached() {\n    if (this.twitterService.isAuthenticated()) {\n      this.twitterService.updateData();\n    }\n  }\n}\n","import environment from './environment';\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {inject, bindable} from 'aurelia-framework';\nimport TwitterService from './services/twitter-service';\n\n@inject(TwitterService)\nexport class NavBar {\n\n  @bindable router;\n\n  constructor(ts) {\n    this.twitterService = ts;\n  }\n\n  showNav(navItem) {\n    if (!navItem.config.role) {\n      return true;\n    }\n    if (this.twitterService.ownUser !== null) {\n      console.log('role: ' + this.twitterService.ownUser.role);\n      if (typeof this.twitterService.ownUser.role !== \"undefined\") {\n        return navItem.config.role === this.twitterService.ownUser.role.toLowerCase();\n      }\n    } else {\n      // ownUser not updated yet\n      console.log('ownUser data not initialized');\n      return false;\n    }\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-http-client';\nimport Fixtures from './fixtures';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {LoginStatus, OwnUserUpdate} from './messages';\n\n@inject(HttpClient, Fixtures, EventAggregator )\nexport default class AsyncHttpClient {\n\n  constructor(httpClient, fixtures, ea) {\n    this.http = httpClient;\n    this.http.configure(http => {\n      http.withBaseUrl(fixtures.baseUrlOnline);\n    });\n    this.ea = ea;\n  }\n\n  isAuthenticated() {\n    if (localStorage.sessionTokenTwitter !== 'null' && typeof localStorage.sessionTokenTwitter !== 'undefined') {\n      this.http.configure(http => {\n        const auth = JSON.parse(localStorage.sessionTokenTwitter);\n        http.withHeader('Authorization', 'bearer ' + auth.token);\n      });\n      // Check if authentication token is valid\n      return Promise.all([\n        this.http.get('api/users/validate')\n      ]).then(res => {\n        // token is valid\n        return true;\n      }).catch(error => {\n        // token is not valid\n        //console.error(error);\n        this.clearAuthentication();\n        return false;\n      });\n    } else {\n      return false;\n    }\n  }\n\n  authenticate(url, user) {\n    return this.http.post(url, user).then(response => {\n      let status = response.content;\n      if (status.success) {\n        localStorage.sessionTokenTwitter = JSON.stringify(response.content);\n        this.http.configure(configuration => {\n          configuration.withHeader('Authorization', 'bearer ' + response.content.token);\n        });\n        console.log('authentication successful: logged in user: ' + user.email);\n        this.ea.publish(new OwnUserUpdate(status.user));\n        status.changed = true;\n      } else {\n        console.log('authentication failed: could not log in user: ' + user.email);\n      }\n      this.ea.publish(new LoginStatus(status));\n    }).catch(error => {\n      const status = {\n        success: false,\n        message: 'service not available'\n      };\n      this.ea.publish(new LoginStatus(status));\n    });\n  }\n\n  clearAuthentication() {\n    localStorage.sessionTokenTwitter = null;\n    this.http.configure(configuration => {\n      configuration.withHeader('Authorization', '');\n    });\n  }\n\n  get(url) {\n    return this.http.get(url);\n  }\n\n  post(url, obj) {\n    return this.http.post(url, obj);\n  }\n\n  delete(url) {\n    return this.http.delete(url);\n  }\n}\n","export default class Fixtures {\n\n  baseUrlLocal = 'http://localhost:4000';\n  baseUrlOnline = 'https://safe-brushlands-98673.herokuapp.com';\n  users = [\n    {\n      username: 'user1',\n      name: 'user eins',\n      email: 'user1@1.com',\n      password: 'secret1'\n    },\n    {\n      username: 'user2',\n      name: 'user zwei',\n      email: 'user2@2.com',\n      password: 'secret2'\n    }\n  ];\n\n  tweets = [\n    {\n      text: 'Test tweet 1',\n      tweeter: this.users[0]\n    },\n    {\n      text: 'Test tweet 2',\n      tweeter: this.users[1]\n    }\n  ];\n}\n","export class LoginStatus {\n  constructor(status) {\n    this.status = status;\n  }\n}\n\nexport class TweetUpdate {\n}\n\nexport class UserUpdate {\n}\n\nexport class OwnUserUpdate {\n  constructor(user) {\n    this.user = user;\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport Fixtures from './fixtures';\nimport {LoginStatus, OwnUserUpdate, TweetUpdate, UserUpdate} from './messages';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport AsyncHttpClient from './async-http-client';\n\n@inject(Fixtures, EventAggregator, AsyncHttpClient, FormData)\nexport default class TwitterService {\n\n  ownUser = null;\n  users = [];\n  tweets = [];\n\n\n  constructor(data, ea, ac) {\n    this.ea = ea;\n    this.ac = ac;\n\n    this.ea.subscribe(OwnUserUpdate, msg => {\n      this.ownUser = msg.user;\n    });\n    this.ea.subscribe(LoginStatus, msg => {\n      if (msg.status.success === true) {\n        this.updateData();\n      } else {\n        this.ac.clearAuthentication();\n      }\n    });\n  }\n\n  updateData() {\n    return Promise.all([\n      this.ac.get('/api/tweets'),\n      this.ac.get('/api/users'),\n      this.ac.get('/api/users/me')\n    ]).then(res => {\n      this.tweets = res[0].content;\n      this.users = res[1].content;\n      this.ownUser = res[2].content;\n\n      this.ea.publish(new TweetUpdate());\n      this.ea.publish(new UserUpdate());\n      this.ea.publish(new OwnUserUpdate(this.ownUser));\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  saveTweet(tweetText, tweetImage) {\n    let formData = new FormData();\n    formData.append('tweetText', tweetText);\n    if (typeof tweetImage !== 'undefined') {\n      formData.append('tweetImage', tweetImage);\n    }\n\n    this.ac.post('/api/tweets', formData).then(res => {\n      this.getTweets();\n    });\n  }\n\n  deleteTweet(tweet) {\n    console.log('twitterService: deleteTweet');\n    this.ac.delete('/api/tweets/' + tweet._id).then(res => {\n      this.getTweets();\n    });\n  }\n\n  deleteAllTweetsForUser(user) {\n    console.log('twitterService: deleteAllTweetsForUser');\n    this.ac.delete('/api/users/' + user._id + '/tweets').then(res => {\n      this.getTweets();\n    });\n  }\n\n  follow(user, bool) {\n    if (bool) {\n      // unfollow\n      this.ac.delete('/api/users/follow/' + user._id).then(res => {\n        this.getUsers();\n      });\n    } else {\n      // follow\n      this.ac.post('/api/users/follow/' + user._id).then(res => {\n        this.getUsers();\n      });\n    }\n  }\n\n  deleteUser(user) {\n    this.ac.delete('/api/users/' + user._id).then(res => {\n      this.getUsers();\n      this.getTweets();\n    });\n  }\n\n  deleteAllUsers() {\n    this.ac.delete('/api/users').then(res => {\n      this.logout();\n    });\n  }\n\n  deleteTweetsForUser(user) {\n    this.ac.delete('/api/users/' + user._id + '/tweets').then(res => {\n      this.getTweets();\n    });\n  }\n\n  updateProfil(username, name, email, password) {\n    let user = {\n      username: username,\n      name: name,\n      email: email,\n      password: password\n    };\n    this.ac.post('/api/users/me', user).then(res => {\n      this.getUsers();\n      this.getMe();\n    });\n  }\n\n  uploadProfilImage(profilIimage) {\n    if (profilIimage !== null || profilIimage !== undefined) {\n      let formData = new FormData();\n      formData.append('info', 'This is a profilImage.');\n      formData.append('profilImage', profilIimage);\n\n      this.ac.post('/api/users/image', formData).then(res => {\n        this.getMe();\n      });\n    }\n  }\n\n  isAuthenticated() {\n    return this.ac.isAuthenticated();\n  }\n\n  getUsers() {\n    return this.ac.get('/api/users').then(res => {\n      this.users = res.content;\n      this.ea.publish(new UserUpdate());\n    });\n  }\n\n  getMe() {\n    return this.ac.get('/api/users/me').then(res => {\n      this.ownUser = res.content;\n      this.ea.publish(new UserUpdate());\n    });\n  }\n\n  getTweets() {\n    return this.ac.get('/api/tweets').then(res => {\n      this.tweets = res.content;\n      this.ea.publish(new TweetUpdate());\n    });\n  }\n\n  register(username, name, email, password) {\n    const newUser = {\n      username: username,\n      name: name,\n      email: email,\n      password: password\n    };\n    return this.ac.post('/api/users', newUser);\n  }\n\n  login(email, password) {\n    const user = {\n      email: email,\n      password: password\n    };\n    return this.ac.authenticate('/api/users/authenticate', user);\n  }\n\n  logout() {\n    const status = {\n      success: false,\n      message: 'Logout',\n      changed: true\n    };\n    this.ac.clearAuthentication();\n    this.ea.publish(new LoginStatus(status));\n  }\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","export class Dashboard {\n}\n","import {inject} from 'aurelia-framework';\nimport TwitterService from '../../services/twitter-service';\nimport {UserUpdate} from '../../services/messages';\n\n@inject(TwitterService)\nexport class Admin {\n\n  adminView = true;\n  username = '';\n  name = '';\n  email = '';\n  password = '';\n  error = false;\n  errorText = null;\n\n  constructor(ts) {\n    this.twitterService = ts;\n  }\n\n  addUser() {\n    return Promise.all([\n      this.twitterService.register(this.username, this.name, this.email, this.password)\n    ]).then(res => {\n      this.twitterService.getUsers();\n      this.errorText = null;\n    }).catch(error => {\n      this.errorText = error.response;\n      //console.error(error);\n    });\n  }\n\n  deleteUser(user) {\n    this.twitterService.deleteUser(user);\n  }\n\n  deleteTweetsForUser(user) {\n    this.twitterService.deleteTweetsForUser(user);\n  }\n\n  deleteAllUsers() {\n    this.twitterService.deleteAllUsers();\n  }\n}\n\n","import {inject} from 'aurelia-framework';\nimport TwitterService from '../../services/twitter-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {UserUpdate} from '../../services/messages';\n\n@inject(TwitterService, EventAggregator)\nexport class FollowerTimeline {\n\n  users = [];\n  tweets = [];\n\n  constructor(ts, ea) {\n    this.twitterService = ts;\n    this.ea = ea;\n    this.updateUsers();\n    this.ea.subscribe(UserUpdate, msg => {\n      this.updateUsers();\n    });\n  }\n\n  updateUsers() {\n    this.users = [];\n    this.users.push(this.twitterService.ownUser);\n    for (let user of this.twitterService.users) {\n      for (let follower of user.followers) {\n        if (follower._id === this.twitterService.ownUser._id) {\n          this.users.push(user);\n        }\n      }\n    }\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport TwitterService from '../../services/twitter-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {UserUpdate} from '../../services/messages';\n\n@inject(TwitterService, EventAggregator)\nexport class GlobalTimeline {\n\n  users = [];\n\n  constructor(ts, ea) {\n    this.twitterService = ts;\n    this.ea = ea;\n    this.updateUsers();\n    this.ea.subscribe(UserUpdate, msg => {\n      this.updateUsers();\n    });\n  }\n\n  updateUsers() {\n    this.users = this.twitterService.users;\n  }\n}\n","import TwitterService from '../../services/twitter-service';\nimport {inject} from 'aurelia-framework';\n\n@inject(TwitterService)\nexport class Logout {\n\n  constructor(ts) {\n    this.twitterService = ts;\n  }\n\n  logout() {\n    console.log('logging out');\n    this.twitterService.logout();\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport TwitterService from '../../services/twitter-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {LoginStatus} from '../../services/messages';\n\n@inject(EventAggregator, TwitterService)\nexport class Login {\n\n  email = '';\n  password = '';\n  rememberMe = false;\n  error = false;\n\n  constructor(ea, ts) {\n    this.twitterService = ts;\n    this.ea = ea;\n    if (localStorage.emailTwitter !== 'null' && typeof localStorage.emailTwitter !== 'undefined') {\n      let loginOptions = JSON.parse(localStorage.emailTwitter);\n      this.email = loginOptions.email;\n      this.rememberMe = loginOptions.rememberMe;\n    }\n    this.ea.subscribe(LoginStatus, msg => {\n      if (msg.status.success !== true) {\n        this.error = true;\n      }\n    });\n  }\n\n  login() {\n    // localStorage: save email and rememberMe\n    if (this.rememberMe === true) {\n      let loginOptions = {\n        email: this.email,\n        rememberMe: this.rememberMe\n      };\n      localStorage.emailTwitter = JSON.stringify(loginOptions);\n    }\n    if (this.rememberMe === false) {\n      localStorage.emailTwitter = null;\n    }\n    console.log(`Trying to log in ${this.email}`);\n    this.twitterService.login(this.email.trim(), this.password.trim());\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport TwitterService from '../../services/twitter-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {UserUpdate} from '../../services/messages';\n\n@inject(TwitterService, EventAggregator)\nexport class Profil {\n\n  ownUser = null;\n  profilImage = null;\n  uploading = false;\n  username = '';\n  name = '';\n  email = '';\n  password = '';\n\n  constructor(ts, ea) {\n    this.twitterService = ts;\n    this.ea = ea;\n    this.updateUser();\n    this.ea.subscribe(UserUpdate, msg => {\n      this.updateUser();\n    });\n  }\n\n  updateUser() {\n    this.ownUser = this.twitterService.ownUser;\n    this.username = this.ownUser.username;\n    this.name = this.ownUser.name;\n    this.email = this.ownUser.email;\n    this.password = this.ownUser.password;\n    this.profilImage = null;\n    this.uploading = false;\n  }\n\n  update() {\n    this.twitterService.updateProfil(this.username, this.name, this.email, this.password);\n  }\n\n  deleteAllTweets() {\n    this.twitterService.deleteAllTweetsForUser(this.ownUser);\n  }\n\n  uploadProfilImage() {\n    if (this.profilImage !== null && this.profilImage.length > 0) {\n      this.uploading = true;\n      this.twitterService.uploadProfilImage(this.profilImage[0]);\n      this.profilImage = null;\n    }\n  }\n\n  getNumberOfFollowedUsers() {\n    let number = 0;\n    for (let user of this.twitterService.users) {\n      for (let follower of user.followers) {\n        if (follower._id === this.ownUser._id) {\n          number++;\n        }\n      }\n    }\n    return number;\n  }\n\n  getNumberOfTweets() {\n    let number = 0;\n    for (let tweet of this.twitterService.tweets) {\n      if (tweet.tweeter._id === this.ownUser._id) {\n        number++;\n      }\n    }\n    return number;\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport TwitterService from '../../services/twitter-service';\n\n@inject(TwitterService)\nexport class Signup {\n\n  username = '';\n  name = '';\n  email = '';\n  password = '';\n  error = false;\n  errorText = null;\n\n  constructor(ts) {\n    this.twitterService = ts;\n  }\n\n  register(e) {\n    return Promise.all([\n      this.twitterService.register(this.username.trim(), this.name.trim(), this.email.trim(), this.password.trim())\n    ]).then(res => {\n      this.errorText = null;\n      this.twitterService.login(this.email, this.password);\n    }).catch(error => {\n      this.errorText = error.response;\n      //console.error(error);\n    });\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport TwitterService from '../../services/twitter-service';\nimport {Router} from 'aurelia-router';\nimport * as d3 from 'd3';\n\n@inject(TwitterService, Router)\nexport class socialGraph {\n\n  static inject() { return [Router]; }\n\n  // Sample implementation from https://bl.ocks.org/mbostock/4600693\n\n  nodes = [];\n  links = [];\n\n  constructor(ts, router) {\n    this.twitterService = ts;\n    this.router = router;\n    this.calculateGraph();\n  }\n\n  calculateGraph() {\n    for (let user of this.twitterService.users) {\n      let node = { 'id': user.username, 'userId': user._id, 'group': 1, 'reference': this};\n      //console.log(node);\n      this.nodes.push(node);\n\n      for (let follower of user.followers) {\n        let link = { 'source': follower.username, 'target': user.username, 'value': 1, 'distance': 40 };\n        //console.log(link);\n        this.links.push(link);\n      }\n    }\n  }\n\n  attached() {\n    let svg = d3.select('svg'),\n      width = +svg.attr('width'),\n      height = +svg.attr('height');\n\n    let color = d3.scaleOrdinal(d3.schemeCategory20);\n\n    let simulation = d3.forceSimulation()\n      .force('link', d3.forceLink().distance(10).strength(0.5))\n      .force('charge', d3.forceManyBody())\n      .force('center', d3.forceCenter(width / 2, height / 2));\n\n    let nodes = this.nodes,\n      nodeById = d3.map(nodes, function(d) { return d.id; }),\n      links = this.links,\n      bilinks = [];\n\n    links.forEach(function(link) {\n      let s = link.source = nodeById.get(link.source),\n        t = link.target = nodeById.get(link.target),\n        i = {}; // intermediate node\n      nodes.push(i);\n      links.push({source: s, target: i}, {source: i, target: t});\n      bilinks.push([s, i, t]);\n    });\n\n    let link = svg.selectAll('.link')\n      .data(bilinks)\n      .enter().append('path')\n      .attr('class', 'link');\n\n    let node = svg.selectAll('.node')\n      .data(nodes.filter(function(d) { return d.id; }))\n      .enter().append('circle')\n      .attr('class', 'node')\n      .attr('r', 7)\n      .attr('fill', function(d) { return color(d.group); })\n      .on('click', navigateToUser)\n      .call(d3.drag()\n        .on('start', dragstarted)\n        .on('drag', dragged)\n        .on('end', dragended));\n\n    node.append('title')\n      .attr('font-size', '1em')\n      .text(function(d) { return d.id; });\n\n    simulation\n      .nodes(nodes)\n      .on('tick', ticked);\n\n    simulation.force('link')\n      .links(links);\n\n    function ticked() {\n      link.attr('d', positionLink);\n      node.attr('transform', positionNode);\n    }\n\n    function positionLink(d) {\n      return 'M' + d[0].x + ',' + d[0].y\n        + 'S' + d[1].x + ',' + d[1].y\n        + ' ' + d[2].x + ',' + d[2].y;\n    }\n\n    function positionNode(d) {\n      return 'translate(' + d.x + ',' + d.y + ')';\n    }\n\n    function dragstarted(d) {\n      if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n      d.fx = d.x, d.fy = d.y;\n    }\n\n    function dragged(d) {\n      d.fx = d3.event.x, d.fy = d3.event.y;\n    }\n\n    function dragended(d) {\n      if (!d3.event.active) simulation.alphaTarget(0);\n      d.fx = null, d.fy = null;\n    }\n\n    function navigateToUser(d) {\n      d.reference.router.navigate('userTimeline/' + d.userId);\n    }\n  }\n}\n\n","import {inject} from 'aurelia-framework';\nimport TwitterService from '../../services/twitter-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {TweetUpdate} from '../../services/messages';\n\n@inject(TwitterService, EventAggregator)\nexport class Timeline {\n  users = [];\n  tweets = [];\n\n  constructor(ts, ea) {\n    this.twitterService = ts;\n    this.ea = ea;\n    this.ea.subscribe(TweetUpdate, msg => {\n      this.updateTweets();\n    });\n  }\n\n  deleteTweet(tweet) {\n    this.twitterService.deleteTweet(tweet);\n  }\n\n  allowDelete(tweet) {\n    if (this.twitterService.ownUser !== null && this.twitterService.ownUser !== undefined) {\n      if (tweet.tweeter._id === this.twitterService.ownUser._id || this.twitterService.ownUser.role === 'admin') {\n        return true;\n      }\n      else {\n        return false;\n      }\n    }\n  }\n\n  activate(data) {\n    this.users = data;\n    this.updateTweets();\n  }\n\n  updateTweets() {\n    this.tweets = [];\n    for (let tweet of this.twitterService.tweets) {\n      for (let user of this.users) {\n        if (tweet.tweeter !== null && tweet.tweeter._id === user._id) {\n          this.tweets.push(tweet);\n        }\n      }\n    }\n  }\n}\n","export class BlobToUrlValueConverter {\n  toView(blob) {\n    return URL.createObjectURL(blob);\n  }\n}\n","export class FileListToArrayValueConverter {\n  toView(fileList) {\n    let files = [];\n    if (!fileList) {\n      return files;\n    }\n    for (let i = 0; i < fileList.length; i++) {\n      files.push(fileList.item(i));\n    }\n    return files;\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport TwitterService from '../../services/twitter-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {TweetUpdate} from '../../services/messages';\n\n@inject(TwitterService, EventAggregator)\nexport class Tweet {\n\n  tweetText = '';\n  imageList = [];\n  selectedFiles = null;\n  error = false;\n  uploading = false;\n\n  constructor(ts, ea) {\n    this.twitterService = ts;\n    this.ea = ea;\n    this.ea.subscribe(TweetUpdate, msg => {\n      this.uploading = false;\n    });\n  }\n\n  createTweet() {\n    if (this.tweetText === '' && this.imageList.length === 0) {\n      this.error = true;\n    } else {\n      this.uploading = true;\n      this.twitterService.saveTweet(this.tweetText, this.imageList[0]);\n      this.tweetText = '';\n      this.selectedFiles = null;\n      this.imageList = [];\n    }\n  }\n\n  addPicturesToArray() {\n    for (let i = 0; i < this.selectedFiles.length; i++) {\n      this.imageList.push(this.selectedFiles.item(i));\n    }\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport TwitterService from '../../services/twitter-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {UserUpdate} from '../../services/messages';\n\n@inject(TwitterService, EventAggregator)\nexport class Usercard {\n  userId = undefined;\n  user = null;\n  alreadyFollowing = undefined;\n\n  constructor(ts, ea) {\n    this.twitterService = ts;\n    this.ea = ea;\n    this.ea.subscribe(UserUpdate, msg => {\n      this.updateUsers();\n    });\n  }\n\n  activate(data) {\n    this.userId = data;\n    this.updateUsers();\n  }\n\n  updateUsers() {\n    for (let user of this.twitterService.users) {\n      if (user._id === this.userId) {\n        this.user = user;\n      }\n    }\n    for (let follower of this.user.followers) {\n      if (follower._id === this.twitterService.ownUser._id) {\n        this.alreadyFollowing = true;\n      }\n    }\n  }\n\n  follow() {\n    this.twitterService.follow(this.user, this.alreadyFollowing);\n    this.alreadyFollowing = !this.alreadyFollowing;\n  }\n\n  hasProfilImage() {\n    if (this.user.profilImage !== undefined) {\n      return true;\n    }\n    else {\n      return false;\n    }\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport TwitterService from '../../services/twitter-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {UserUpdate} from '../../services/messages';\n\n@inject(TwitterService, EventAggregator)\nexport class Users {\n\n  otherUsers = [];\n\n  constructor(ts, ea) {\n    this.twitterService = ts;\n    this.ea = ea;\n    this.updateUsers();\n    this.ea.subscribe(UserUpdate, msg => {\n      this.updateUsers();\n    });\n  }\n\n  updateUsers() {\n    this.otherUsers = [];\n    for (let user of this.twitterService.users) {\n      if (user._id !== this.twitterService.ownUser._id) {\n        this.otherUsers.push(user);\n      }\n    }\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport TwitterService from '../../services/twitter-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {UserUpdate} from '../../services/messages';\n\n@inject(TwitterService, EventAggregator)\nexport class UserTimeline {\n\n  userId = null;\n  user = null;\n\n  constructor(ts, ea) {\n    this.twitterService = ts;\n    this.ea = ea;\n    this.ea.subscribe(UserUpdate, msg => {\n      this.updateUsers();\n    });\n  }\n\n  activate(params) {\n    this.userId = params.id;\n    this.updateUsers();\n  }\n\n  updateUsers() {\n    for (let user of this.twitterService.users) {\n      if (user._id === this.userId) {\n        this.user = user;\n      }\n    }\n  }\n}\n"],"sourceRoot":".."}